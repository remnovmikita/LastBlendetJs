{"version":3,"file":"cart.js","sources":["../src/cart.js"],"sourcesContent":["//Логіка сторінки Cart\n\nimport { addProdInCart, changeTheme, numbers, ordersReady, prodClick } from \"./js/handlers\";\nimport { hideLoader, message, showLoader } from \"./js/helpers\";\nimport { getProdById } from \"./js/products-api\";\nimport { refs } from \"./js/refs\";\nimport { writeProducts } from \"./js/render-function\";\nimport { arrCart, arrWishList, KEY3 } from \"./js/storage\";\n\n\n\ncartListApp()\n\n\nasync function cartListApp() {\n  document.documentElement.setAttribute(\n    \"data-theme\",\n    JSON.parse(localStorage.getItem(KEY3)) || \"light\"\n  );\n\n  numbers()\n  refs.spanCart[0].textContent = arrCart.length;\n\n  showLoader();\n  try {\n    const promises = arrCart.map(id => getProdById(id));\n    const products = await Promise.all(promises);\n\n    refs.products.innerHTML = writeProducts(products);\n\n    const totalPrice = products.reduce((acc, prod) => acc + prod.price, 0);\n    refs.spanCart[1].textContent = Math.round(totalPrice * 100) / 100;\n  } catch (err) {\n    console.error(\"Ошибка при загрузке корзины:\", err);\n    \n  } finally {\n    hideLoader();\n  }\n}\n\n\n// Клік на відкриття модалки\nrefs.products.addEventListener(\"click\", prodClick)\n//\n// Додавання в массив Карт та прибирання\nrefs.btnCart.addEventListener(\"click\", addProdInCart);\nrefs.btnCart.addEventListener(\"click\", cartListApp);\n//\n// Клік кнопки купити\nrefs.btnBuy.addEventListener(\"click\", ordersReady)\nrefs.btnBuy.addEventListener(\"click\", cartListApp)\n//\n\nrefs.btnTheme.addEventListener(\"click\", changeTheme)"],"names":["cartListApp","KEY3","numbers","refs","arrCart","showLoader","promises","id","getProdById","products","writeProducts","totalPrice","acc","prod","err","hideLoader","prodClick","addProdInCart","ordersReady","changeTheme"],"mappings":"mKAWAA,EAAa,EAGb,eAAeA,GAAc,CAC3B,SAAS,gBAAgB,aACvB,aACA,KAAK,MAAM,aAAa,QAAQC,CAAI,CAAC,GAAK,OAC9C,EAEEC,EAAS,EACTC,EAAK,SAAS,CAAC,EAAE,YAAcC,EAAQ,OAEvCC,IACA,GAAI,CACF,MAAMC,EAAWF,EAAQ,IAAIG,GAAMC,EAAYD,CAAE,CAAC,EAC5CE,EAAW,MAAM,QAAQ,IAAIH,CAAQ,EAE3CH,EAAK,SAAS,UAAYO,EAAcD,CAAQ,EAEhD,MAAME,EAAaF,EAAS,OAAO,CAACG,EAAKC,IAASD,EAAMC,EAAK,MAAO,CAAC,EACrEV,EAAK,SAAS,CAAC,EAAE,YAAc,KAAK,MAAMQ,EAAa,GAAG,EAAI,GAC/D,OAAQG,EAAK,CACZ,QAAQ,MAAM,+BAAgCA,CAAG,CAErD,QAAY,CACRC,GACD,CACH,CAIAZ,EAAK,SAAS,iBAAiB,QAASa,CAAS,EAGjDb,EAAK,QAAQ,iBAAiB,QAASc,CAAa,EACpDd,EAAK,QAAQ,iBAAiB,QAASH,CAAW,EAGlDG,EAAK,OAAO,iBAAiB,QAASe,CAAW,EACjDf,EAAK,OAAO,iBAAiB,QAASH,CAAW,EAGjDG,EAAK,SAAS,iBAAiB,QAASgB,CAAW"}