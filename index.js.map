{"version":3,"file":"index.js","sources":["../src/js/handlers.js","../src/home.js"],"sourcesContent":["import { getProdByCaterogy, getProdById, getProductByName, getProducts } from \"./products-api\";\nimport { refs } from \"./refs\";\nimport { writemodalById, writeProducts } from \"./render-function\";\nimport { arrCart, arrWishList, KEY, KEY2 } from \"./storage\";\n\n\nexport async function onClick(e){\n    let products;\n    const target = e.target;\n    \n    if(!target.classList.contains(\"categories__btn\"))return\n    refs.categories.querySelectorAll(\"button\").forEach(btn => btn.classList.remove(\"categories__btn--active\"))\n    \n\n    if(target.textContent === \"All\"){\n        products = await getProducts();\n    }else{\n        products = await getProdByCaterogy(e.target.textContent) \n    }\n    if(products.length === 0) refs.div.classList.add(\"not-found--visible\");\n    target.classList.add(\"categories__btn--active\")\n    refs.products.innerHTML = writeProducts(products);\n}\n\nrefs.btnClose.addEventListener(\"click\", closeModal)\n\nrefs.modal.addEventListener(\"click\", e=>{\n    if(e.target === e.currentTarget) closeModal();\n    \n})\n\n\nfunction checkButton(event){\n    if(event.key === \"Escape\")closeModal();\n}\nfunction closeModal(){\n    refs.modal.classList.remove(\"modal--is-open\");\n    window.removeEventListener(\"keydown\", checkButton)\n}\n\n\nexport async function submitForm(e) {\n    e.preventDefault();\n    const findValueProducts = e.target.elements.searchValue.value\n    if(findValueProducts.trim() === \"\") return\n\n    const getProd = await getProductByName(findValueProducts);\n    \n    if(getProd.length === 0) {\n        refs.products.innerHTML = \"\"\n    }else{\n        refs.products.innerHTML = writeProducts(getProd)\n    }\n    \n    refs.div.classList.toggle(\"not-found--visible\", getProd.length === 0);\n    e.target.reset();    \n\n    \n}\n\nexport async function prodClick(e){\n const target = e.target.closest(\"li\");\n if(!target)return\n const product = await getProdById(target.dataset.id)\n const id = target.dataset.id\n refs.modalContent.innerHTML = writemodalById(product)\n \n refs.modal.classList.add(\"modal--is-open\")\n if (arrCart.includes(id)) {\n    refs.btnCart.textContent = \"Remove from Cart\";\n  } else {\n    refs.btnCart.textContent = \"Add to Cart\";\n  }\n  if(arrWishList.includes(id)){\n    refs.btnWishList.textContent = \"Remove from Wishlist\";\n  }else{\n    refs.btnWishList.textContent = \"Add from Wishlist\"\n  }\n window.addEventListener(\"keydown\", checkButton)\n \n}\n/*#region addCart*/\n\n\nexport function addProdInCart() {\n  const id = refs.modal.querySelector(\".modal-product__content\").dataset.id;\n\n if (arrCart.includes(id)) {\n    // удаляем товар\n    const index = arrCart.indexOf(id);\n    arrCart.splice(index, 1);\n    refs.btnCart.textContent = \"Add to Cart\";\n  } else {\n    // добавляем товар\n    arrCart.push(id);\n    refs.btnCart.textContent = \"Remove from Cart\";\n  }\n\n\n  localStorage.setItem(KEY, JSON.stringify(arrCart));\n  refs.spanProd[0].textContent = arrCart.length;\n}\n\n/*#endregion addCart*/\n/*#region WishList*/\n\nexport function addWishList(){\n    const id = refs.modal.querySelector(\".modal-product__content\").dataset.id;\nif (arrWishList.includes(id)) {\n    // удаляем товар\n    const index = arrWishList.indexOf(id);\n    arrWishList.splice(index, 1);\n    refs.btnWishList.textContent = \"Add to Wishlist\";\n  } else {\n    // добавляем товар\n    arrWishList.push(id);\n    refs.btnWishList.textContent = \"Remove from Wishlist\";\n  }\n\n    localStorage.setItem(KEY2, JSON.stringify(arrWishList))\n    refs.spanProd[1].textContent = arrWishList.length;\n}\n\n/*#endregion WishList*/","//Логіка сторінки Home\n\nimport { getCatalog, getProdByCaterogy, getProdById, getProductByName, getProducts } from './js/products-api';\nimport { refs } from './js/refs';\nimport { writeCatalog, writemodalById, writeProducts } from './js/render-function';\nimport { addProdInCart, addWishList, onClick, prodClick, submitForm } from './js/handlers';\nimport { arrCart, arrWishList } from './js/storage';\n\ninitAp();\n\nasync function initAp() {\n  const categories = await getCatalog();\n  refs.categories.innerHTML = writeCatalog(categories);\n\n  const products = await getProducts();\n  refs.products.innerHTML = writeProducts(products);\n\n  refs.spanProd[0].textContent = arrCart.length;\nrefs.spanProd[1].textContent = arrWishList.length;\n}\n\n\nrefs.categories.addEventListener(\"click\", onClick)\n\nrefs.products.addEventListener(\"click\", prodClick)\n\nrefs.form.addEventListener(\"submit\", submitForm)\n\nrefs.btnCart.addEventListener(\"click\", addProdInCart);\n\nrefs.btnWishList.addEventListener(\"click\", addWishList)\n\n\n"],"names":["onClick","products","target","refs","btn","getProducts","getProdByCaterogy","writeProducts","closeModal","checkButton","event","submitForm","findValueProducts","getProd","getProductByName","prodClick","product","getProdById","id","writemodalById","arrCart","arrWishList","addProdInCart","index","KEY","addWishList","KEY2","initAp","categories","getCatalog","writeCatalog"],"mappings":"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"}