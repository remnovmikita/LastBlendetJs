{"version":3,"file":"index.js","sources":["../src/js/products-api.js","../src/js/refs.js","../src/js/render-function.js","../src/js/storage.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://dummyjson.com/products';\n\nexport const getCatalog = async () => {\n  const { data } = await axios.get('/category-list');\n  const res = ['All', ...data];\n  return res;\n};\n\nexport const getProducts = async (currentPage = 1) => {\n  const url = `?limit=12&skip=${(currentPage - 1) * 12}`;\n  const { data } = await axios.get(url);\n\n  return data.products;\n};\n\nexport const getProdByCaterogy = async(target, currentPage = 1 ) =>{\n    const {data} = await axios.get(`/category/${target}?limit=12&skip=${(currentPage - 1) * 12}`)\n\n    return data.products\n}\n\nexport const getProdById = async(id)=>{\n    const {data} = await axios.get(`/${id}`)\n    return data\n}\n\nexport const getProductByName = async (value, currentPage = 1)=>{\n    const {data} = await axios.get(`/search?q=${value}&limit=12&skip=${(currentPage - 1) * 12}`);\n    return data.products\n}","export const refs = {\n  categories: document.querySelector('.categories'),\n  products: document.querySelector('.products'),\n  div: document.querySelector(\"div.not-found\"),\n  modalContent: document.querySelector(\"div.modal-product\"),\n  modal: document.querySelector(\"div.modal\"),\n  btnClose: document.querySelector('.modal__close-btn'),\n  form: document.querySelector(\".search-form\"),\n  btnCart: document.querySelector(\".modal-product__btn--cart\"),\n  spanProd: document.querySelector(\"span.nav__count\"),\n};\n","export const writeCatalog = arr => {\n  return arr\n    .map(\n      x => \n        `\n        <li class=\"categories__item\">\n        <button class=\"categories__btn ${x === \"All\" ? \"categories__btn--active\" : \"\"}\" type=\"button\">${x}</button>\n        </li>\n        `\n    )\n    .join('');\n};\n\nexport const writeProducts = arr => {\n  return arr.map(({id,title,description,category,price,thumbnail,brand}) => \n    `<li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${description}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: ${brand}</span></p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: ${price}</p>\n </li>`).join('');\n};\n\nexport const writemodalById = ({id,title,description,price,shippingInformation,returnPolicy,tags,images,}) =>{\n    return `\n    <img class=\"modal-product__img\" src=\"${images[0]}\" alt=\"${title}\" />\n      <div class=\"modal-product__content\" data-id=\"${id}\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">\n        ${tags.map(tag => `<li>${tag}</li>`)}\n        </ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping:$${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy:${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: ${price}$</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>\n    `\n}","export const KEY = \"cart\";\nexport const arr = JSON.parse(localStorage.getItem(KEY)) || [];","import { getProdByCaterogy, getProdById, getProductByName, getProducts } from \"./products-api\";\nimport { refs } from \"./refs\";\nimport { writemodalById, writeProducts } from \"./render-function\";\nimport { arr, KEY } from \"./storage\";\n\n\nexport async function onClick(e){\n    let products;\n    const target = e.target;\n    \n    if(!target.classList.contains(\"categories__btn\"))return\n    refs.categories.querySelectorAll(\"button\").forEach(btn => btn.classList.remove(\"categories__btn--active\"))\n    \n\n    if(target.textContent === \"All\"){\n        products = await getProducts();\n    }else{\n        products = await getProdByCaterogy(e.target.textContent) \n    }\n    if(products.length === 0) refs.div.classList.add(\"not-found--visible\");\n    target.classList.add(\"categories__btn--active\")\n    refs.products.innerHTML = writeProducts(products);\n}\n\nrefs.btnClose.addEventListener(\"click\", closeModal)\n\nrefs.modal.addEventListener(\"click\", e=>{\n    if(e.target === e.currentTarget) closeModal();\n    \n})\n\n\nfunction checkButton(event){\n    if(event.key === \"Escape\")closeModal();\n}\nfunction closeModal(){\n    refs.modal.classList.remove(\"modal--is-open\");\n    window.removeEventListener(\"keydown\", checkButton)\n}\n\n\nexport async function submitForm(e) {\n    e.preventDefault();\n    const findValueProducts = e.target.elements.searchValue.value\n    if(findValueProducts.trim() === \"\") return\n\n    const getProd = await getProductByName(findValueProducts);\n    \n    if(getProd.length === 0) {\n        refs.products.innerHTML = \"\"\n    }else{\n        refs.products.innerHTML = writeProducts(getProd)\n    }\n    \n    refs.div.classList.toggle(\"not-found--visible\", getProd.length === 0);\n    e.target.reset();    \n\n    \n}\n\nexport async function prodClick(e){\n const target = e.target.closest(\"li\");\n if(!target)return\n const product = await getProdById(target.dataset.id)\n const id = target.dataset.id\n refs.modalContent.innerHTML = writemodalById(product)\n console.log(id);\n refs.modal.classList.add(\"modal--is-open\")\n if (arr.includes(id)) {\n    refs.btnCart.textContent = \"Remove from Cart\";\n  } else {\n    refs.btnCart.textContent = \"Add to Cart\";\n  }\n\n window.addEventListener(\"keydown\", checkButton)\n \n}\n\nexport function addProdInCart() {\n  const id = refs.modal.querySelector(\".modal-product__content\").dataset.id;\n\n if (arr.includes(id)) {\n    // удаляем товар\n    const index = arr.indexOf(id);\n    arr.splice(index, 1);\n    refs.btnCart.textContent = \"Add to Cart\";\n  } else {\n    // добавляем товар\n    arr.push(id);\n    refs.btnCart.textContent = \"Remove from Cart\";\n  }\n\n\n  localStorage.setItem(KEY, JSON.stringify(arr));\n  refs.spanProd.textContent = arr.length;\n  console.log(arr);\n}\n","//Логіка сторінки Home\n\nimport { getCatalog, getProdByCaterogy, getProdById, getProductByName, getProducts } from './js/products-api';\nimport { refs } from './js/refs';\nimport { writeCatalog, writemodalById, writeProducts } from './js/render-function';\nimport { addProdInCart, onClick, prodClick, submitForm } from './js/handlers';\n\ninitAp();\n\nasync function initAp() {\n  const categories = await getCatalog();\n  refs.categories.innerHTML = writeCatalog(categories);\n\n  const products = await getProducts();\n  refs.products.innerHTML = writeProducts(products);\n\n}\n\n\nrefs.categories.addEventListener(\"click\", onClick)\n\nrefs.products.addEventListener(\"click\", prodClick)\n\nrefs.form.addEventListener(\"submit\", submitForm)\n\nrefs.btnCart.addEventListener(\"click\", addProdInCart);\n\n\n"],"names":["axios","getCatalog","data","getProducts","currentPage","url","getProdByCaterogy","target","getProdById","id","getProductByName","value","refs","writeCatalog","arr","x","writeProducts","title","description","category","price","thumbnail","brand","writemodalById","shippingInformation","returnPolicy","tags","images","tag","KEY","onClick","e","products","btn","closeModal","checkButton","event","submitForm","findValueProducts","getProd","prodClick","product","addProdInCart","index","initAp","categories"],"mappings":"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"}