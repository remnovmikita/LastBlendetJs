import{i as b,a as l}from"./vendor-D0-MY6np.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();const o={categories:document.querySelector(".categories"),products:document.querySelector(".products"),div:document.querySelector("div.not-found"),modalContent:document.querySelector("div.modal-product"),modal:document.querySelector("div.modal"),btnClose:document.querySelector(".modal__close-btn"),form:document.querySelector(".search-form"),btnCart:document.querySelector(".modal-product__btn--cart"),spanProd:document.querySelectorAll("span.nav__count"),btnWishList:document.querySelector(".modal-product__btn--wishlist"),spanCart:document.querySelectorAll(".cart-summary__value"),btnBuy:document.querySelector(".cart-summary__btn"),btnTheme:document.querySelector(".theme-toggle-btn"),loader:document.querySelector(".div-loader")};function C(t,e){b[t]({title:"OK",message:`${e}`,position:"topCenter"})}function v(){o.loader.classList.remove("hidden")}function L(){o.loader.classList.add("hidden")}l.defaults.baseURL="https://dummyjson.com/products";const A=async()=>{const{data:t}=await l.get("/category-list");return["All",...t]},S=async(t=1)=>{const e=`?limit=12&skip=${(t-1)*12}`,{data:s}=await l.get(e);return s.products},$=async(t,e=1)=>{v();try{const{data:s}=await l.get(`/category/${t}?limit=12&skip=${(e-1)*12}`);return s.products}catch{}finally{L()}},w=async t=>{const{data:e}=await l.get(`/${t}`);return e},P=async(t,e=1)=>{const{data:s}=await l.get(`/search?q=${t}&limit=12&skip=${(e-1)*12}`);return s.products},T=t=>t.map(e=>`
        <li class="categories__item">
        <button class="categories__btn ${e==="All"?"categories__btn--active":""}" type="button">${e}</button>
        </li>
        `).join(""),g=t=>t.map(({id:e,title:s,description:a,category:r,price:n,thumbnail:d,brand:u})=>`<li class="products__item" data-id="${e}">
    <img class="products__image" src="${d}" alt="${a}"/>
    <p class="products__title">${s}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${u}</span></p>
    <p class="products__category">Category: ${r}</p>
    <p class="products__price">Price: ${n}</p>
 </li>`).join(""),q=({id:t,title:e,description:s,price:a,shippingInformation:r,returnPolicy:n,tags:d,images:u})=>`
    <img class="modal-product__img" src="${u[0]}" alt="${e}" />
      <div class="modal-product__content" data-id="${t}">
        <p class="modal-product__title">${e}</p>
        <ul class="modal-product__tags">
        ${d.map(h=>`<li>${h}</li>`)}
        </ul>
        <p class="modal-product__description">${s}</p>
        <p class="modal-product__shipping-information">Shipping:$${r}</p>
        <p class="modal-product__return-policy">Return Policy:${n}</p>
        <p class="modal-product__price">Price: ${a}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>
    `,m="cart";let c=JSON.parse(localStorage.getItem(m))||[];const f="wishlist";let i=JSON.parse(localStorage.getItem(f))||[];const y="theme";JSON.parse(localStorage.getItem(y));async function I(t){let e;const s=t.target;o.products.innerHTML="",s.classList.contains("categories__btn")&&(o.categories.querySelectorAll("button").forEach(a=>a.classList.remove("categories__btn--active")),s.textContent==="All"?e=await S():e=await $(t.target.textContent),e.length===0&&o.div.classList.add("not-found--visible"),s.classList.add("categories__btn--active"),o.products.innerHTML=g(e))}o.btnClose.addEventListener("click",p);o.modal.addEventListener("click",t=>{t.target===t.currentTarget&&p()});function _(t){t.key==="Escape"&&p()}function p(){o.modal.classList.remove("modal--is-open"),window.removeEventListener("keydown",_)}async function N(t){t.preventDefault();const e=t.target.elements.searchValue.value;if(e.trim()==="")return;const s=await P(e);s.length===0?o.products.innerHTML="":o.products.innerHTML=g(s),o.div.classList.toggle("not-found--visible",s.length===0),t.target.reset()}async function W(t){const e=t.target.closest("li");if(!e)return;const s=await w(e.dataset.id),a=e.dataset.id;o.modalContent.innerHTML=q(s),o.modal.classList.add("modal--is-open"),c.includes(a)?o.btnCart.textContent="Remove from Cart":o.btnCart.textContent="Add to Cart",i.includes(a)?o.btnWishList.textContent="Remove from Wishlist":o.btnWishList.textContent="Add from Wishlist",window.addEventListener("keydown",_)}function E(){const t=o.modal.querySelector(".modal-product__content").dataset.id;if(c.includes(t)){const e=c.indexOf(t);c.splice(e,1),o.btnCart.textContent="Add to Cart"}else c.push(t),o.btnCart.textContent="Remove from Cart";localStorage.setItem(m,JSON.stringify(c)),o.spanProd[0].textContent=c.length}function k(){const t=o.modal.querySelector(".modal-product__content").dataset.id;if(i.includes(t)){const e=i.indexOf(t);i.splice(e,1),o.btnWishList.textContent="Add to Wishlist"}else i.push(t),o.btnWishList.textContent="Remove from Wishlist";localStorage.setItem(f,JSON.stringify(i)),o.spanProd[1].textContent=i.length}function B(){C("success","Замовлення готове"),c.splice(0,c.length),localStorage.setItem(m,JSON.stringify(c))}function J(){const e=document.body.getAttribute("data-theme")==="dark"?"light":"dark";x(e)}function x(t){document.body.setAttribute("data-theme",t),localStorage.setItem(y,JSON.stringify(t))}function M(){o.spanProd[0].textContent=c.length,o.spanProd[1].textContent=i.length}export{y as K,i as a,k as b,J as c,A as d,T as e,S as f,w as g,L as h,N as i,E as j,c as k,B as l,M as n,I as o,W as p,o as r,v as s,g as w};
//# sourceMappingURL=handlers-DZm7rUej.js.map
