import{i as w,a as l}from"./vendor-D0-MY6np.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();const o={categories:document.querySelector(".categories"),products:document.querySelector(".products"),div:document.querySelector("div.not-found"),modalContent:document.querySelector("div.modal-product"),modal:document.querySelector("div.modal"),btnClose:document.querySelector(".modal__close-btn"),form:document.querySelector(".search-form"),btnCart:document.querySelector(".modal-product__btn--cart"),spanProd:document.querySelectorAll("span.nav__count"),btnWishList:document.querySelector(".modal-product__btn--wishlist"),spanCart:document.querySelectorAll(".cart-summary__value"),btnBuy:document.querySelector(".cart-summary__btn"),btnTheme:document.querySelector(".theme-toggle-btn"),loader:document.querySelector(".div-loader"),btnLoadMore:document.querySelector(".load-more-btn"),btnScrollUp:document.querySelector(".scroll-top-btn")};function $(t,e){w[t]({title:"OK",message:`${e}`,position:"topCenter"})}function b(){o.loader.classList.remove("hidden")}function h(){o.loader.classList.add("hidden")}function P(){o.btnLoadMore.classList.remove("is-hidden")}function y(){o.btnLoadMore.classList.add("is-hidden")}function q(){o.btnScrollUp.classList.add("scroll-top-btn--visible")}l.defaults.baseURL="https://dummyjson.com/products";const W=async()=>{const{data:t}=await l.get("/category-list");return["All",...t]},_=async(t=1)=>{const e=`?limit=12&skip=${(t-1)*12}`,{data:s}=await l.get(e);return s.products},x=async()=>{try{const{data:t}=await l.get("https://dummyjson.com/products");return t.total}catch{}},O=async(t,e=1)=>{b();try{const{data:s}=await l.get(`/category/${t}?limit=12&skip=${(e-1)*12}`);return s.products}catch{}finally{h()}},A=async t=>{const{data:e}=await l.get(`/${t}`);return e},M=async(t,e=1)=>{const{data:s}=await l.get(`/search?q=${t}&limit=12&skip=${(e-1)*12}`);return s.products},E=t=>t.map(e=>`
        <li class="categories__item">
        <button class="categories__btn ${e==="All"?"categories__btn--active":""}" type="button">${e}</button>
        </li>
        `).join(""),p=t=>t.map(({id:e,title:s,description:a,category:n,price:r,thumbnail:d,brand:m})=>`<li class="products__item" data-id="${e}">
    <img class="products__image" src="${d}" alt="${a}"/>
    <p class="products__title">${s}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${m}</span></p>
    <p class="products__category">Category: ${n}</p>
    <p class="products__price">Price: ${r}</p>
 </li>`).join(""),T=({id:t,title:e,description:s,price:a,shippingInformation:n,returnPolicy:r,tags:d,images:m})=>`
    <img class="modal-product__img" src="${m[0]}" alt="${e}" />
      <div class="modal-product__content" data-id="${t}">
        <p class="modal-product__title">${e}</p>
        <ul class="modal-product__tags">
        ${d.map(v=>`<li>${v}</li>`)}
        </ul>
        <p class="modal-product__description">${s}</p>
        <p class="modal-product__shipping-information">Shipping:$${n}</p>
        <p class="modal-product__return-policy">Return Policy:${r}</p>
        <p class="modal-product__price">Price: ${a}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>
    `,g="cart";let c=JSON.parse(localStorage.getItem(g))||[];const L="wishlist";let i=JSON.parse(localStorage.getItem(L))||[];const C="theme";JSON.parse(localStorage.getItem(C));async function k(t){let e;const s=t.target;o.products.innerHTML="",s.classList.contains("categories__btn")&&(o.categories.querySelectorAll("button").forEach(a=>a.classList.remove("categories__btn--active")),s.textContent==="All"?e=await _():e=await O(t.target.textContent),e.length===0&&o.div.classList.add("not-found--visible"),s.classList.add("categories__btn--active"),o.products.innerHTML=p(e))}o.btnClose.addEventListener("click",f);o.modal.addEventListener("click",t=>{t.target===t.currentTarget&&f()});function S(t){t.key==="Escape"&&f()}function f(){o.modal.classList.remove("modal--is-open"),window.removeEventListener("keydown",S)}async function B(t){t.preventDefault();const e=t.target.elements.searchValue.value;if(e.trim()==="")return;const s=await M(e);s.length===0?o.products.innerHTML="":o.products.innerHTML=p(s),o.div.classList.toggle("not-found--visible",s.length===0),t.target.reset()}async function J(t){const e=t.target.closest("li");if(!e)return;const s=await A(e.dataset.id),a=e.dataset.id;o.modalContent.innerHTML=T(s),o.modal.classList.add("modal--is-open"),c.includes(a)?o.btnCart.textContent="Remove from Cart":o.btnCart.textContent="Add to Cart",i.includes(a)?o.btnWishList.textContent="Remove from Wishlist":o.btnWishList.textContent="Add from Wishlist",window.addEventListener("keydown",S)}function R(){const t=o.modal.querySelector(".modal-product__content").dataset.id;if(c.includes(t)){const e=c.indexOf(t);c.splice(e,1),o.btnCart.textContent="Add to Cart"}else c.push(t),o.btnCart.textContent="Remove from Cart";localStorage.setItem(g,JSON.stringify(c)),o.spanProd[0].textContent=c.length}function j(){const t=o.modal.querySelector(".modal-product__content").dataset.id;if(i.includes(t)){const e=i.indexOf(t);i.splice(e,1),o.btnWishList.textContent="Add to Wishlist"}else i.push(t),o.btnWishList.textContent="Remove from Wishlist";localStorage.setItem(L,JSON.stringify(i)),o.spanProd[1].textContent=i.length}function H(){$("success","Замовлення готове"),c.splice(0,c.length),localStorage.setItem(g,JSON.stringify(c))}function K(){const e=document.body.getAttribute("data-theme")==="dark"?"light":"dark";N(e)}function N(t){document.body.setAttribute("data-theme",t),localStorage.setItem(C,JSON.stringify(t))}function U(){o.spanProd[0].textContent=c.length,o.spanProd[1].textContent=i.length}let u=1;async function V(){y(),b();const t=await x(),e=Math.ceil(t/12);if(u===e){y();return}u+=1,u>1&&q();const s=await _(u);h(),P(),o.products.insertAdjacentHTML("beforeend",p(s))}function Y(){window.scrollTo({top:0,behavior:"smooth"})}export{C as K,i as a,j as b,K as c,W as d,E as e,_ as f,A as g,h,B as i,R as j,V as k,P as l,Y as m,U as n,k as o,J as p,c as q,o as r,b as s,H as t,p as w};
//# sourceMappingURL=handlers-DJ-8M2Xx.js.map
