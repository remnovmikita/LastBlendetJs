{"version":3,"file":"handlers-rA0T78h-.js","sources":["../../src/js/helpers.js","../../src/js/products-api.js","../../src/js/refs.js","../../src/js/render-function.js","../../src/js/storage.js","../../src/js/handlers.js"],"sourcesContent":["import iziToast from \"izitoast\";\n\n\n\nexport function message(typeMessage, textMessage){\n    iziToast[typeMessage]({\n    title: 'OK',\n    message: `${textMessage}`,\n    position: \"topCenter\"\n});\n}\n\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://dummyjson.com/products';\n\nexport const getCatalog = async () => {\n  const { data } = await axios.get('/category-list');\n  const res = ['All', ...data];\n  return res;\n};\n\nexport const getProducts = async (currentPage = 1) => {\n  const url = `?limit=12&skip=${(currentPage - 1) * 12}`;\n  const { data } = await axios.get(url);\n\n  return data.products;\n};\n\nexport const getProdByCaterogy = async(target, currentPage = 1 ) =>{\n    const {data} = await axios.get(`/category/${target}?limit=12&skip=${(currentPage - 1) * 12}`)\n\n    return data.products\n}\n\nexport const getProdById = async(id)=>{\n    const {data} = await axios.get(`/${id}`)\n    return data\n}\n\nexport const getProductByName = async (value, currentPage = 1)=>{\n    const {data} = await axios.get(`/search?q=${value}&limit=12&skip=${(currentPage - 1) * 12}`);\n    return data.products\n}","export const refs = {\n  categories: document.querySelector('.categories'),\n  products: document.querySelector('.products'),\n  div: document.querySelector(\"div.not-found\"),\n  modalContent: document.querySelector(\"div.modal-product\"),\n  modal: document.querySelector(\"div.modal\"),\n  btnClose: document.querySelector('.modal__close-btn'),\n  form: document.querySelector(\".search-form\"),\n  btnCart: document.querySelector(\".modal-product__btn--cart\"),\n  spanProd: document.querySelectorAll(\"span.nav__count\"),\n  btnWishList: document.querySelector(\".modal-product__btn--wishlist\"),\n  spanCart:document.querySelectorAll(\".cart-summary__value\"),\n  btnBuy:document.querySelector(\".cart-summary__btn\")\n};\n","export const writeCatalog = arr => {\n  return arr\n    .map(\n      x => \n        `\n        <li class=\"categories__item\">\n        <button class=\"categories__btn ${x === \"All\" ? \"categories__btn--active\" : \"\"}\" type=\"button\">${x}</button>\n        </li>\n        `\n    )\n    .join('');\n};\n\nexport const writeProducts = arr => {\n  return arr.map(({id,title,description,category,price,thumbnail,brand}) => \n    `<li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${description}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: ${brand}</span></p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: ${price}</p>\n </li>`).join('');\n};\n\nexport const writemodalById = ({id,title,description,price,shippingInformation,returnPolicy,tags,images,}) =>{\n    return `\n    <img class=\"modal-product__img\" src=\"${images[0]}\" alt=\"${title}\" />\n      <div class=\"modal-product__content\" data-id=\"${id}\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">\n        ${tags.map(tag => `<li>${tag}</li>`)}\n        </ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping:$${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy:${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: ${price}$</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>\n    `\n}","export const KEY = \"cart\";\nexport let arrCart = JSON.parse(localStorage.getItem(KEY)) || [];\n\nexport const KEY2 = \"wishlist\"\n\nexport let arrWishList = JSON.parse(localStorage.getItem(KEY2)) || [];\n\nexport const KEY3 = \"theme\"","import { message } from \"./helpers\";\nimport { getProdByCaterogy, getProdById, getProductByName, getProducts } from \"./products-api\";\nimport { refs } from \"./refs\";\nimport { writemodalById, writeProducts } from \"./render-function\";\nimport { arrCart, arrWishList, KEY, KEY2 } from \"./storage\";\n\n\nexport async function onClick(e){\n    let products;\n    const target = e.target;\n    \n    if(!target.classList.contains(\"categories__btn\"))return\n    refs.categories.querySelectorAll(\"button\").forEach(btn => btn.classList.remove(\"categories__btn--active\"))\n    \n\n    if(target.textContent === \"All\"){\n        products = await getProducts();\n    }else{\n        products = await getProdByCaterogy(e.target.textContent) \n    }\n    if(products.length === 0) refs.div.classList.add(\"not-found--visible\");\n    target.classList.add(\"categories__btn--active\")\n    refs.products.innerHTML = writeProducts(products);\n}\n\nrefs.btnClose.addEventListener(\"click\", closeModal)\n\nrefs.modal.addEventListener(\"click\", e=>{\n    if(e.target === e.currentTarget) closeModal();\n    \n})\n\n\nfunction checkButton(event){\n    if(event.key === \"Escape\")closeModal();\n}\nfunction closeModal(){\n    refs.modal.classList.remove(\"modal--is-open\");\n    window.removeEventListener(\"keydown\", checkButton)\n}\n\n\nexport async function submitForm(e) {\n    e.preventDefault();\n    const findValueProducts = e.target.elements.searchValue.value\n    if(findValueProducts.trim() === \"\") return\n\n    const getProd = await getProductByName(findValueProducts);\n    \n    if(getProd.length === 0) {\n        refs.products.innerHTML = \"\"\n    }else{\n        refs.products.innerHTML = writeProducts(getProd)\n    }\n    \n    refs.div.classList.toggle(\"not-found--visible\", getProd.length === 0);\n    e.target.reset();    \n\n    \n}\n\nexport async function prodClick(e){\n const target = e.target.closest(\"li\");\n if(!target)return\n const product = await getProdById(target.dataset.id)\n const id = target.dataset.id\n refs.modalContent.innerHTML = writemodalById(product)\n \n refs.modal.classList.add(\"modal--is-open\")\n if (arrCart.includes(id)) {\n    refs.btnCart.textContent = \"Remove from Cart\";\n  } else {\n    refs.btnCart.textContent = \"Add to Cart\";\n  }\n  if(arrWishList.includes(id)){\n    refs.btnWishList.textContent = \"Remove from Wishlist\";\n  }else{\n    refs.btnWishList.textContent = \"Add from Wishlist\"\n  }\n window.addEventListener(\"keydown\", checkButton)\n \n}\n/*#region addCart*/\n\n\nexport function addProdInCart() {\n  const id = refs.modal.querySelector(\".modal-product__content\").dataset.id;\n\n if (arrCart.includes(id)) {\n    // удаляем товар\n    const index = arrCart.indexOf(id);\n    arrCart.splice(index, 1);\n    refs.btnCart.textContent = \"Add to Cart\";\n  } else {\n    // добавляем товар\n    arrCart.push(id);\n    refs.btnCart.textContent = \"Remove from Cart\";\n  }\n\n\n  localStorage.setItem(KEY, JSON.stringify(arrCart));\n  refs.spanProd[0].textContent = arrCart.length;\n}\n\n/*#endregion addCart*/\n/*#region WishList*/\n\nexport function addWishList(){\n    const id = refs.modal.querySelector(\".modal-product__content\").dataset.id;\nif (arrWishList.includes(id)) {\n    // удаляем товар\n    const index = arrWishList.indexOf(id);\n    arrWishList.splice(index, 1);\n    refs.btnWishList.textContent = \"Add to Wishlist\";\n  } else {\n    // добавляем товар\n    arrWishList.push(id);\n    refs.btnWishList.textContent = \"Remove from Wishlist\";\n  }\n\n    localStorage.setItem(KEY2, JSON.stringify(arrWishList))\n    refs.spanProd[1].textContent = arrWishList.length;\n    \n}\n\n/*#endregion WishList*/\n\n\n/*#region Orders Ready*/\n\nexport function ordersReady(){\n  message(\"success\", \"Замовлення готове\");\n  \n  \n  // const info = localStorage.getItem(KEY)\n  arrCart.splice(0, arrCart.length)\n  localStorage.setItem(KEY, JSON.stringify(arrCart))\n\n\n}\n\n/*#endregion Orders Ready*/"],"names":["message","typeMessage","textMessage","iziToast","axios","getCatalog","data","getProducts","currentPage","url","getProdByCaterogy","target","getProdById","id","getProductByName","value","refs","writeCatalog","arr","x","writeProducts","title","description","category","price","thumbnail","brand","writemodalById","shippingInformation","returnPolicy","tags","images","tag","KEY","arrCart","KEY2","arrWishList","onClick","e","products","btn","closeModal","checkButton","event","submitForm","findValueProducts","getProd","prodClick","product","addProdInCart","index","addWishList","ordersReady"],"mappings":"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"}